<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/style.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
        <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>unlint.github.com lint tools</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>unlint.github.com</h1>
          <h2>Advanced topics</h2>
        </header>

        <hr>

        <section id="main_content">
          <a name="hook"><h3>How to configure Post-Receive Hooks</h3></a>
          <p>
            You should configure pull request <noindex><a href="http://developer.github.com/v3/repos/hooks/#pubsubhubbub">webhook</a></noindex> for you repo. 
            Url for this hook should be:
            <pre>http://unlint.org/github/hook/:token</pre>
            <strong>:token</strong> is optional. It is used for private repos.
            Look section about creating <a href="#token">authentication tokens.</a>You can use form below to generate curl command for creating webhook for you repo.

            <form class="form-horizontal">
              <div class="control-group">
                  <label class="control-label" for="hook_login">Login</label>
                  <div class="controls">
                      <input id="hook_login" name="hook_login" type="text" value=":login" class="span3"/>
                  </div><br/>
                  <label class="control-label" for="hook_owner">Repo owner</label>
                  <div class="controls">
                      <input id="hook_owner" name="hook_owner" type="text" value=":owner" class="span3"/>
                  </div><br/>
                  <label class="control-label" for="hook_repo">Repo</label>
                  <div class="controls">
                      <input id="hook_repo" name="hook_repo" type="text" value=":repo" class="span3"/>
                  </div><br/>
                  <label class="control-label" for="hook_token">Token</label>
                  <div class="controls">
                      <input id="hook_token" name="hook_token" type="text" value=":token" class="span3"/>
                  </div>
              </div>
              <div class="control-group">
                  <label class="control-label" for="hook_curl">CURL</label>
                  <div class="controls">
                    <textarea id="hook_curl" name="hook_curl"  class="span6"></textarea>
                  </div>
              </div>
          </form>
          </p>

          <a name="token"><h3>How to create authentication token</h3></a>
          <p>
            Use form below to generate curl command for creation authentication token.
            <form class="form-horizontal">
              <div class="control-group">
                  <label class="control-label" for="token_login">Login</label>
                  <div class="controls">
                      <input id="token_login" name="token_login" type="text" value=":login" class="span3"/>
                  </div>
              </div>
              <div class="control-group">
                  <label class="control-label" for="token_curl">CURL</label>
                  <div class="controls">
                    <textarea id="token_curl" name="token_curl"  class="span6"></textarea>
                  </div>
              </div>
          </form>
          </p>
        </section>


        <footer>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

          <script src="javascripts/jquery-1.7.1.min.js"></script>
          <script src="javascripts/main.js"></script>

          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38264788-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>
          <script type="text/javascript">
            function renderWebhookCURL() {
              var login = $("#hook_login").val();
              var owner = $("#hook_owner").val();
              var repo = $("#hook_repo").val();
              var token = $("#hook_token").val();

              if (token.length > 0) {
                token = '/' + token;
              }

              $("#hook_curl").val('curl -u "'+login+'" -i https://api.github.com/hub -F "hub.mode=subscribe" -F "hub.topic=https://github.com/'+owner+'/'+repo+'/events/pull_request" -F "hub.callback=http://unlint.org/github/hook'+token+'"');
            }

            function renderTokenCURL() {
              var login = $("#token_login").val();
              $("#token_curl").val('curl -u "'+login+'" https://api.github.com/authorizations -d "{ \\"scopes\\": [\\"repo\\"], \\"note\\": \\"unlint.github.com\\" }"');
            }

            renderWebhookCURL();
            $("#hook_login").keyup(renderWebhookCURL);
            $("#hook_owner").keyup(renderWebhookCURL);
            $("#hook_repo").keyup(renderWebhookCURL);
            $("#hook_token").keyup(renderWebhookCURL);

            renderTokenCURL();
            $("#token_login").keyup(renderTokenCURL);
          </script>

      </div>
    </div>
  </body>
</html>